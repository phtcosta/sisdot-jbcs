---
title: "Estudo de caso para Journal of the Brazilian Computer Society (JBCS)"
output:
  pdf_document: default
  html_document:
    highlight: pygments
  word_document: default
date: "5 de janeiro, 2019"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
install.packages("dplyr")
install.packages("ggplot2")
install.packages("scales")
install.packages("reshape2")

library(dplyr)
library(ggplot2)
library(scales)
library(reshape2)
```

* * *


#### RQ.1: Does our proposed approach, based on meta-programming, generate correct QDMs?
**Não será respondida com R**



#### RQ.2: Does the use of a DSL reduce the effort necessary to implement the test cases that target QDM generation? 

**Carrega os dados dos chamadores:**
```{r}
chamadores <- read.csv("chamadores.csv", 
               header = TRUE, quote="\"", 
               stringsAsFactors= TRUE, strip.white = TRUE)
```

**Cria colunas adicionais:**
```{r}
chamadores <- mutate(chamadores, diferenca = java - dsl)

# o chamador dsl corresponde a qtos % do chamador java
chamadores <- mutate(chamadores, percent_dsl = (dsl * 100)/java)

# o chamador dsl eh qtos % menor do que o chamador java
chamadores <- mutate(chamadores, percent_menor = 100-percent_dsl)
```

#### Entendimento dos Dados: 

##### Descrição dos atributos:
```{r}
str(chamadores)
```

##### Summary:
```{r}
# dsl
summary(chamadores$dsl)

#resumo da dsl
chamadores %>%
  summarise(media = mean(dsl), desvio_padrao = sd(dsl), mediana = median(dsl))

#java
summary(chamadores$java)

#resumo do java
chamadores %>%
  summarise(media = mean(java), desvio_padrao = sd(java), mediana = median(java))



#diferenca
summary(chamadores$diferenca)

#resumo da diferenca
chamadores %>%
  summarise(media = mean(diferenca), desvio_padrao = sd(diferenca), mediana = median(diferenca))



#percent_menor
summary(chamadores$percent_menor)

#resumo do percent_menor
chamadores %>%
  summarise(media = mean(percent_menor), desvio_padrao = sd(percent_menor), mediana = median(percent_menor))


#forte correlacao 
cor(chamadores$java,chamadores$diferenca)

```

##### Plots:
```{r}
#histograma da diferenca
qplot(x = diferenca, data = chamadores, geom = "histogram", binwidth = 1, fill=I("blue"), col=I("black"), alpha=I(.4))

#nao tem uma relacao clara entre diferenca e dsl
qplot(x = diferenca, y = dsl, data = chamadores, geom = "line")

#Quanto maior o chamador em Java maior a diferenca (mas na verdade eh relacionada a qtde de regras)
qplot(x = java, y = diferenca, data = chamadores, geom = "point", xlab = "Java code lines", ylab = "Difference")

```




#### RQ3: Does our proposed approach, based on meta-programming, generate QDMs within a satisfactory time-frame?

**Carrega os dados:**
```{r}
tempo <- read.csv("tempo.csv", header = TRUE)
```

##### Analise:
```{r}

#correlacao fraca entre a qtde de cargos e o tempo de geracao
cor(tempo$cargos,tempo$X1000)
cor(tempo$cargos,tempo$X2000)

#sem correlacao entre os tempos (1000 e 2000 chamadores)
cor(tempo$X1000,tempo$X2000)

#correlacao fraca entre a qtde total de militares e o tempo de geracao
cor(tempo$total,tempo$X1000)
cor(tempo$total,tempo$X2000)

#media dos tempos de geracao
mean(tempo$X1000)
mean(tempo$X2000)

#sumario dos tempos
summary(tempo$X1000)
summary(tempo$X2000)

#sumario de cargos e total
summary(tempo$cargos)
summary(tempo$total)

#resumo do tempo (100 chamadores)
tempo %>%
  summarise(media = mean(X1000), desvio_padrao = sd(X1000), mediana = median(X1000), minimo=min(X1000), maximo=max(X1000))


#plots so pra ter nocao, mesmo sabendo q nao tem correlacao
plot(x = tempo$X1000, y = tempo$cargos)
plot(x = tempo$X1000, y = tempo$total)

#histograma do tempo (1000 chamadores)
hist(tempo$X1000)


#barplot(tempo$X1000)



#aux <- tempo[1,]
#aux
#c(aux[4:length(aux)])
#aux[4:length(aux)]

#tmp <- tempo[,4:length(tempo)]
#tmp



#plot(aux[4:length(aux)], pch = '|')
#plot(c(aux[4:length(aux)]))

#plot(aux[4:length(aux)])

#plot(x = qc, y = c200, data = aux, geom = "line")
```


